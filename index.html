<!doctype html> <html> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1"> <title> gonzedge.com </title> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml"/> <link href="/stylesheets/all-3b0cf2bc.css" rel=stylesheet /> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72477714-1', 'auto');
  ga('send', 'pageview');

</script> </head> <body> <nav class="navbar navbar-default" role=nav> <div class=container> <div class=row> <div class="col-sm-3 col-xs-6"> <header class=navbar-header> <h1 class=navbar-title> <a href="/" class=navbar-brand> <code>@gonzedge</code> </a> </h1> </header> </div> <div class="col-sm-7 hidden-xs"> <p class="navbar-text hidden-xs hidden-sm"> <code>Adventures of a software development generalist</code> </p> </div> <div class="col-sm-2 col-xs-6"> <div class=navbar-right> <ul class="nav navbar-nav"> <li> <a href="https://github.com/gonzedge" class=social-link> <i class="fa fa-github"></i> </a> </li> </ul> </div> </div> </div> </div> </nav> <div class=container> <div class=row> <aside class="col-sm-3 hidden-xs"> <div class=sidebar-module> <h4> Featured <span class="pull-right see-more"> <a href="/blog/" class=button>See all posts →</a> </span> </h4> <ol class=list-unstyled> <li> <h5> <a href="/blog/2016/01/26/query-objects-in-the-rails-world-a-different-approach.html">Query Objects in the Rails world - A Different Approach</a> </h5> </li> <li> <h5> <a href="/blog/2018/02/15/ruby-performance-hash-has-key-vs-square-brackets.html">Ruby performance: Hash's #has_key? vs. #[] (square brackets)</a> </h5> </li> <li> <h5> <a href="/blog/2016/01/27/unit-testing-active-record-eager-loading.html">Unit Testing ActiveRecord eager-loading</a> </h5> </li> <li> <h5> <a href="/blog/2018/02/19/ruby-performance-attr-accessor-vs-def-method.html">Ruby performance: #attr_accessor vs. method definition</a> </h5> </li> <li> <h5> <a href="/blog/2016/04/10/using-page-objects-in-your-acceptance-tests.html">Using Page Objects in your Acceptance Tests</a> </h5> </li> <li> <h5> <a href="/blog/2018/02/11/ruby-performance-using-benchmarks-and-memory-profiler-to-chase-performance-degradations.html">Ruby performance: Using benchmarks and memory_profiler to chase performance degradations</a> </h5> </li> <li> <h5> <a href="/blog/2016/04/12/page-objects-where-do-you-put-your-assertions.html">Page Objects: Where do you put your assertions?</a> </h5> </li> <li> <h5> <a href="/blog/2012/04/27/git-removing-sensitive-data-and-rewriting-history.html">Git: Removing sensitive data and rewriting history</a> </h5> </li> <li> <h5> <a href="/blog/2016/04/12/specifying-failure-message-for-rspec-expectations.html">Specifying failure message for RSpec expectations</a> </h5> </li> <li> <h5> <a href="/blog/2016/01/11/installing-macvim-with-lua-enabled-through-homebrew.html">Installing MacVim with Lua enabled through Homebrew</a> </h5> </li> </ol> </div> <div class=sidebar-module> <h4> Recent <span class="pull-right see-more"> <a href="/blog/" class=button>See all posts →</a> </span> </h4> <ol class=list-unstyled> <li> <h5> <a href="/blog/2020/07/26/using-certbot-to-add-lets-encrypt-certificate-on-heroku.html">Using certbot to add Let's Encrypt certificate on Heroku</a> </h5> </li> <li> <h5> <a href="/blog/2018/02/19/ruby-performance-attr-accessor-vs-def-method.html">Ruby performance: #attr_accessor vs. method definition</a> </h5> </li> <li> <h5> <a href="/blog/2018/02/15/ruby-performance-hash-has-key-vs-square-brackets.html">Ruby performance: Hash's #has_key? vs. #[] (square brackets)</a> </h5> </li> <li> <h5> <a href="/blog/2018/02/11/ruby-performance-using-benchmarks-and-memory-profiler-to-chase-performance-degradations.html">Ruby performance: Using benchmarks and memory_profiler to chase performance degradations</a> </h5> </li> <li> <h5> <a href="/blog/2017/01/23/rambling-trie-1-0-0-released.html">Rambling Trie 1.0.0 released!</a> </h5> </li> <li> <h5> <a href="/blog/2016/04/12/page-objects-where-do-you-put-your-assertions.html">Page Objects: Where do you put your assertions?</a> </h5> </li> <li> <h5> <a href="/blog/2016/04/12/specifying-failure-message-for-rspec-expectations.html">Specifying failure message for RSpec expectations</a> </h5> </li> <li> <h5> <a href="/blog/2016/04/10/using-page-objects-in-your-acceptance-tests.html">Using Page Objects in your Acceptance Tests</a> </h5> </li> <li> <h5> <a href="/blog/2016/01/27/unit-testing-active-record-eager-loading.html">Unit Testing ActiveRecord eager-loading</a> </h5> </li> <li> <h5> <a href="/blog/2016/01/26/query-objects-in-the-rails-world-a-different-approach.html">Query Objects in the Rails world - A Different Approach</a> </h5> </li> </ol> </div> <div class=sidebar-module> <h4>Tags</h4> <ol class="list-inline tags"> <li> <h5> <a href="/blog/tags/ruby.html">ruby (35)</a> </h5> </li> <li> <h5> <a href="/blog/tags/instructions.html">instructions (34)</a> </h5> </li> <li> <h5> <a href="/blog/tags/plugins-and-libraries.html">plugins and libraries (24)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rails.html">rails (24)</a> </h5> </li> <li> <h5> <a href="/blog/tags/releases.html">releases (18)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rambling-slider.html">rambling-slider (17)</a> </h5> </li> <li> <h5> <a href="/blog/tags/jquery.html">jquery (16)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rails-3-1.html">rails 3.1 (16)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rubygems.html">rubygems (15)</a> </h5> </li> <li> <h5> <a href="/blog/tags/slider.html">slider (14)</a> </h5> </li> <li> <h5> <a href="/blog/tags/nivo-slider.html">nivo slider (14)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rambling.html">rambling (12)</a> </h5> </li> <li> <h5> <a href="/blog/tags/fixes.html">fixes (11)</a> </h5> </li> <li> <h5> <a href="/blog/tags/new-site.html">new site (8)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rambling-trie.html">rambling-trie (8)</a> </h5> </li> <li> <h5> <a href="/blog/tags/performance.html">performance (7)</a> </h5> </li> <li> <h5> <a href="/blog/tags/data-structure.html">data structure (7)</a> </h5> </li> <li> <h5> <a href="/blog/tags/testing.html">testing (6)</a> </h5> </li> <li> <h5> <a href="/blog/tags/vim.html">vim (5)</a> </h5> </li> <li> <h5> <a href="/blog/tags/bugs.html">bugs (5)</a> </h5> </li> <li> <h5> <a href="/blog/tags/opinions.html">opinions (5)</a> </h5> </li> <li> <h5> <a href="/blog/tags/javascript.html">javascript (5)</a> </h5> </li> <li> <h5> <a href="/blog/tags/refactoring.html">refactoring (5)</a> </h5> </li> <li> <h5> <a href="/blog/tags/git.html">git (4)</a> </h5> </li> <li> <h5> <a href="/blog/tags/coffeescript.html">coffeescript (4)</a> </h5> </li> <li> <h5> <a href="/blog/tags/flash.html">flash (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/heroku.html">heroku (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rambling-slider-rails.html">rambling-slider-rails (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/capybara.html">capybara (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rvm.html">rvm (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/design-patterns.html">design-patterns (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/new-look.html">new look (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rubymine.html">rubymine (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/markdown.html">markdown (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/error-handling.html">error handling (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/database-migrations.html">database migrations (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/ssh.html">ssh (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/ubuntu.html">ubuntu (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/cyanogenmod.html">cyanogenmod (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/nodejs.html">nodejs (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/haml.html">haml (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/jasmine.html">jasmine (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/android.html">android (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/selenium.html">selenium (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/nokogiri.html">nokogiri (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/refinerycms.html">refinerycms (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/internet-explorer.html">internet explorer (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/mercurial.html">mercurial (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/jetbrains.html">jetbrains (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/windows.html">windows (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/actionmailer.html">actionmailer (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/postgresql.html">postgresql (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/i18n.html">i18n (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/capybara-webkit.html">capybara-webkit (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/will-paginate.html">will_paginate (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/deployment.html">deployment (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/activerecord.html">activerecord (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/background-tasks.html">background tasks (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/cron.html">cron (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/simple-navigation.html">simple-navigation (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/html.html">html (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/erb.html">erb (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/assets.html">assets (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/bash.html">bash (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/github.html">github (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/pygments.html">pygments (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/lua.html">lua (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/homebrew.html">homebrew (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/powershell.html">powershell (1)</a> </h5> </li> </ol> </div> </aside> <div id=main class=col-sm-9 role=main> <nav> <ul class=pager> <li class=previous> <a href="/page/2/">← Older</a> </li> </ul> </nav> <ul class=list-unstyled> <li> <h1> <a href="/blog/2020/07/26/using-certbot-to-add-lets-encrypt-certificate-on-heroku.html">Using certbot to add Let's Encrypt certificate on Heroku</a> </h1> <p> <small>July 26, 2020</small> </p> <p>Ever since Google announced in 2017 that they would be prioritizing sites with HTTPS for SEO, I knew I had to make sure this blog had the necessary setup. I initially procrastinated a bit because I thought I was going to have to do some research to find the latest and greatest in terms of trusted certificate authorities. Once I decided to put this in place my research wasn’t long at all.</p> <p>Enter <a href="https://letsencrypt.org/">Let’s Encrypt</a>, a</p> <blockquote> <p><em>free, automated, and open certificate authority… provided by the ISRG</em>.</p> </blockquote> <p>Well that gives me peace of mind. Further investigation then pointed me to <a href="https://certbot.eff.org/"><code>certbot</code></a>, a</p> <blockquote> <p><em>free, open source software tool for automatically using Let’s Encrypt certificates on manually-administrated websites to enable HTTPS</em>.</p> </blockquote> <p>Nice 😌, that’s perfect.</p> <p>Let’s get…</p><p class=text-right> <a href="/blog/2020/07/26/using-certbot-to-add-lets-encrypt-certificate-on-heroku.html" class=button>Continue Reading →</a> </p> </li> <li> <h1> <a href="/blog/2018/02/19/ruby-performance-attr-accessor-vs-def-method.html">Ruby performance: #attr_accessor vs. method definition</a> </h1> <p> <small>February 19, 2018</small> </p> <p>I’ve been digging a lot into <a href="http://gonzedge.com/blog/2018/02/11/chasing-performance-degradations-with-ruby-benchmarks-and-memory-profiler.html">Ruby performance</a> <a href="http://gonzedge.com/blog/2018/02/15/ruby-performance-hash-has-key-vs-square-brackets.html">lately</a> and this much digging has taken me into some very interesting corners of Rubyland. My latest surprise has been the difference between defining attribute methods via the <code>attr_accessor</code> <a href="https://ruby-doc.org/core-2.5.0/Module.html#method-i-attr_accessor">provided language construct</a> (as well as <code>attr_reader</code> and <code>attr_writer</code>) vs. defining them yourself (as in <code>def attribute</code> and <code>def attribute=</code>). Here’s what I ran into…</p> <p>I created two simple classes with identical interfaces. The only difference between the two is how we are defining access to set and get the <code>@value</code> attribute in each:</p> <div class=highlight><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">TestClassAttrAccessor</span>
  <span class="nb">attr_accessor</span> <span class="ss">:value</span>

  <span class="k">def</span> <span class="nf">initialize</span> <span class="n">value</span>
    <span class="vi">@value</span> <span class="o">=</span> <span class="n">value</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">TestClassDefMethod</span>
  <span class="k">def</span> <span class="nf">initialize</span> <span class="n">value</span>
    <span class="vi">@value</span> <span class="o">=</span> <span class="n">value</span>
  <span class="k">end</span>

  <span class="k">def</span></code></pre></div><p class=text-right> <a href="/blog/2018/02/19/ruby-performance-attr-accessor-vs-def-method.html" class=button>Continue Reading →</a> </p> </li> <li> <h1> <a href="/blog/2018/02/15/ruby-performance-hash-has-key-vs-square-brackets.html">Ruby performance: Hash's #has_key? vs. #[] (square brackets)</a> </h1> <p> <small>February 15, 2018</small> </p> <p>During my time last year developing performance improvements for <a href="https://github.com/gonzedge/rambling-trie">Rambling Trie</a>, I stumbled into something quite interesting that happens with Ruby’s <code>Hash</code> class.</p> <p>A commonly used method from the <code>Hash</code> interface is <code>#has_key?</code> which tells you if the <code>Hash</code> in question contains a particular key. Rambling Trie’s underlying data structure is an n-ary tree backed by a <code>Hash</code> where each key is the letter corresponding to a child and each value is the <code>Node</code> that corresponds to that letter. As you might imagine, <code>#has_key?</code> is a common operation called throughout the gem implementation.</p> <p>To my surprise, while running some <a href="https://ruby-doc.org/stdlib-2.4.0/libdoc/benchmark/rdoc/Benchmark.html">Ruby benchmarks</a> I noticed that accessing the key with <code>#[]</code> and verifying if it was <code>nil</code> instead of calling <code>#has_key?</code> lowered the time it took…</p><p class=text-right> <a href="/blog/2018/02/15/ruby-performance-hash-has-key-vs-square-brackets.html" class=button>Continue Reading →</a> </p> </li> <li> <h1> <a href="/blog/2018/02/11/ruby-performance-using-benchmarks-and-memory-profiler-to-chase-performance-degradations.html">Ruby performance: Using benchmarks and memory_profiler to chase performance degradations</a> </h1> <p> <small>February 11, 2018</small> </p> <p>While working on some of the performance improvements for <a href="https://rubygems.org/gems/rambling-trie/versions/1.0.0">version 1.0.0 of Rambling Trie</a> late in 2016 and early in 2017, I upgraded from Ruby 2.3.3 to Ruby 2.4.0 imagining that the newer version would help me on my mission to make all operations execute a bit faster. To my surprise, I ran into a significant performance degradation after upgrading - specifically, there was a ~25% increase in the time it took to execute a script using a trie with a big-ish word dictionary. This intrigued me enough that I decided to take a closer look.</p> <h3>Benchmarking with Ruby</h3> <p>After some investigation with the help of <a href="https://ruby-doc.org/stdlib-2.4.0/libdoc/benchmark/rdoc/Benchmark.html">Ruby’s own <code>Benchmark</code></a>, I realized that while most operations were a bit slower, the main problem was a lot more visible during intensive operations…</p><p class=text-right> <a href="/blog/2018/02/11/ruby-performance-using-benchmarks-and-memory-profiler-to-chase-performance-degradations.html" class=button>Continue Reading →</a> </p> </li> <li> <h1> <a href="/blog/2017/01/23/rambling-trie-1-0-0-released.html">Rambling Trie 1.0.0 released!</a> </h1> <p> <small>January 23, 2017</small> </p> <p>It’s been a while since I last wrote anything about <a href="https://github.com/gonzedge/rambling-trie">Rambling Trie</a> (or anything at all really), but I wanted to take the time to talk about all the changes and performance improvements that I’ve made to the gem lately and that culminated in the <a href="https://rubygems.org/gems/rambling-trie/versions/1.0.0">release</a> of <a href="https://github.com/gonzedge/rambling-trie/releases/tag/v1.0.0">version 1.0.0</a>.</p> <p>The changes worth highlighting are:</p> <h3>NEW: Ability to dump and load tries from disk</h3> <p>It takes a relatively long time to load all the words from a large dictionary into a new trie in memory. This becomes especially annoying when you have to do this full process every time you restart your application, even though you know that the trie is going to remain constant over time.</p> <p>To sort this out, you can now use the <code>Rambling::Trie.load</code> and <code>Rambling::Trie.dump</code> methods! Like this:</p> <p class=text-right> <a href="/blog/2017/01/23/rambling-trie-1-0-0-released.html" class=button>Continue Reading →</a> </p> </li> <li> <h1> <a href="/blog/2016/04/12/page-objects-where-do-you-put-your-assertions.html">Page Objects: Where do you put your assertions?</a> </h1> <p> <small>April 12, 2016</small> </p> <p>I started writing about <a href="http://gonzedge.com/blog/2016/04/10/using-page-objects-in-your-acceptance-tests.html">Page Objects earlier this month</a>, and as soon as you start talking about <a href="http://martinfowler.com/bliki/PageObject.html">Page Objects</a>, you need to have an opinion about where to put your assertions. Do you ask the page if it is in the state it expects to be or do you ask the page for values and assert that they are what you expect them to be in the test?</p> <p>If you look at <a href="https://github.com/FluentLenium/FluentLenium">FluentLenium</a> and <a href="https://github.com/dgageot/simplelenium">Simplelenium</a> on GitHub, you’ll notice that their corresponding <code>README</code>s describe the usage of the Page Object pattern. Now, if you take a closer look, you’ll also notice that they have an opinion: they’ve included the assertions in the definition of such Page Objects.</p> <p>Now, my first experience with Page Objects was actually under these conditions. The Page Objects were the main driver…</p><p class=text-right> <a href="/blog/2016/04/12/page-objects-where-do-you-put-your-assertions.html" class=button>Continue Reading →</a> </p> </li> <li> <h1> <a href="/blog/2016/04/12/specifying-failure-message-for-rspec-expectations.html">Specifying failure message for RSpec expectations</a> </h1> <p> <small>April 12, 2016</small> </p> <p>When writing the <a href="http://gonzedge.com/blog/2016/01/27/unit-testing-active-record-eager-loading.html">Unit Testing ActiveRecord eager-loading</a> blog post a couple months ago, I noticed that the test failures I was getting while writing were not very helpful. Initially, I had an assertion that looked like this:</p> <div class=highlight><pre class="highlight ruby"><code><span class="n">expect</span><span class="p">(</span><span class="n">restaurant</span><span class="p">.</span><span class="nf">association</span><span class="p">(</span><span class="ss">:reviews</span><span class="p">)).</span><span class="nf">to</span> <span class="n">be_loaded</span>
</code></pre></div> <p>Since I was writing the test before the implementation — *<em>cough</em>* <a href="http://david.heinemeierhansson.com/2014/tdd-is-dead-long-live-testing.html">TDD</a> <a href="http://martinfowler.com/articles/is-tdd-dead/">isn’t dead</a> *<em>cough</em>* — I got the expected failure when running it. However, the failure message was not that friendly after all:</p> <div class=highlight><pre class="highlight plaintext"><code>$ rspec spec/controllers/restaurant_controller_spec.rb
Failures:

  1) RestaurantsController#index eager loads
     Failure/Error: expect(restaurant.association(:reviews)).to be_loaded
       expected `#&lt;ActiveRecord::Associations::HasManyAssociation (...) &gt;.loaded?` to return…</code></pre></div><p class=text-right> <a href="/blog/2016/04/12/specifying-failure-message-for-rspec-expectations.html" class=button>Continue Reading →</a> </p> </li> <li> <h1> <a href="/blog/2016/04/10/using-page-objects-in-your-acceptance-tests.html">Using Page Objects in your Acceptance Tests</a> </h1> <p> <small>April 10, 2016</small> </p> <p>If you’ve written <a href="http://c2.com/cgi/wiki?AcceptanceTest">acceptance tests</a> for web applications in the past (also called feature tests), you might be familiar with tools like <a href="https://github.com/jnicklas/capybara">Capybara</a>, <a href="https://github.com/dgageot/simplelenium">Simplelenium</a> and <a href="https://github.com/FluentLenium/FluentLenium">FluentLenium</a>. These are great abstractions over the browser (<a href="http://docs.seleniumhq.org/">thanks, Selenium!</a>) that provide very nice APIs for testing web applications.</p> <p>If you’ve done this for a while, you might also have heard of <a href="http://martinfowler.com/bliki/PageObject.html">Page Objects</a>. The idea behind them is that your tests should be about the behavior of your application and not about the underlying HTML, since the HTML is an implementation detail and probably not the interesting part of your tests.</p> <h2>Our base acceptance test</h2> <p>Let’s assume that we are working on an application where you can browse and review restaurants and we have an acceptance test…</p><p class=text-right> <a href="/blog/2016/04/10/using-page-objects-in-your-acceptance-tests.html" class=button>Continue Reading →</a> </p> </li> <li> <h1> <a href="/blog/2016/01/27/unit-testing-active-record-eager-loading.html">Unit Testing ActiveRecord eager-loading</a> </h1> <p> <small>January 27, 2016</small> </p> <p>If you’ve worked with relational databases and any <a href="https://en.wikipedia.org/wiki/Object-relational_mapping">ORM</a>s like <a href="http://hibernate.org/orm/">Java’s Hibernate</a>, <a href="http://nhibernate.info/">.NET’s NHibernate</a> or <a href="http://guides.rubyonrails.org/active_record_querying.html">Rails’ <code>ActiveRecord</code></a> in the past, you might be familiar with <a href="https://stackoverflow.com/questions/97197/what-is-the-n1-selects-issue">SELECT N+1</a> <a href="https://www.hibernatingrhinos.com/products/nhprof/learn/alert/selectnplusone">issues</a>. It is a common performance problem in database-dependent applications and, because of this, these ORMs provide a built-in solution to this problem.</p> <p>In <code>ActiveRecord</code>, <a href="http://blog.bigbinary.com/2013/07/01/preload-vs-eager-load-vs-joins-vs-includes.html"><code>includes</code>, <code>preload</code> and <code>eager_load</code></a> come to the rescue. Therefore, it is not unusual to find these keywords scattered in different places where your application accesses the database. Hopefully this isn’t a lot of places though - <a href="http://gonzedge.com/blog/2016/01/26/query-objects-in-the-rails-world-a-different-approach.html">you are using Query Objects, right?</a></p> <h2>An example application</h2> <p>Let’s imagine for a second that we have an application where you can browse restaurants, which in turn have many reviews…</p><p class=text-right> <a href="/blog/2016/01/27/unit-testing-active-record-eager-loading.html" class=button>Continue Reading →</a> </p> </li> <li> <h1> <a href="/blog/2016/01/26/query-objects-in-the-rails-world-a-different-approach.html">Query Objects in the Rails world - A Different Approach</a> </h1> <p> <small>January 26, 2016</small> </p> <p>If you have worked with <a href="http://rubyonrails.org">Ruby on Rails</a> before then you might be familiar with ActiveRecord <code>scopes</code>. Using them, you can achieve what many would consider very readable code. Let’s say that we have an application where we display an inbox where users receive messages.</p> <div class=highlight><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">Message</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
<span class="k">end</span>
</code></pre></div> <p>Now, let’s imagine that after reading a <code>Message</code>, it is marked as read, and let’s represent that with a <code>read</code> column in the database. Additionally, our users can either archive the <code>Message</code> or move it to the trash. We’ll represent this concept with a <code>location</code> column in the <code>messages</code> table.</p> <h2>Querying the database the Rails way</h2> <p>Let’s say that our users want to have a way to view unread messages in their inbox. Using <code>ActiveRecord</code>, you could achieve…</p><p class=text-right> <a href="/blog/2016/01/26/query-objects-in-the-rails-world-a-different-approach.html" class=button>Continue Reading →</a> </p> </li> </ul> <div class=pager> <nav> <ul class=pager> <li class=previous> <a href="/page/2/">← Older</a> </li> </ul> </nav> </div> </div> <aside class="col-sm-3 visible-xs-block"> <div class=sidebar-module> <h4> Recent <span class="pull-right see-more"> <a href="/blog/" class=button>See all posts →</a> </span> </h4> <ol class=list-unstyled> <li> <h5> <a href="/blog/2020/07/26/using-certbot-to-add-lets-encrypt-certificate-on-heroku.html">Using certbot to add Let's Encrypt certificate on Heroku</a> </h5> </li> <li> <h5> <a href="/blog/2018/02/19/ruby-performance-attr-accessor-vs-def-method.html">Ruby performance: #attr_accessor vs. method definition</a> </h5> </li> <li> <h5> <a href="/blog/2018/02/15/ruby-performance-hash-has-key-vs-square-brackets.html">Ruby performance: Hash's #has_key? vs. #[] (square brackets)</a> </h5> </li> <li> <h5> <a href="/blog/2018/02/11/ruby-performance-using-benchmarks-and-memory-profiler-to-chase-performance-degradations.html">Ruby performance: Using benchmarks and memory_profiler to chase performance degradations</a> </h5> </li> <li> <h5> <a href="/blog/2017/01/23/rambling-trie-1-0-0-released.html">Rambling Trie 1.0.0 released!</a> </h5> </li> <li> <h5> <a href="/blog/2016/04/12/page-objects-where-do-you-put-your-assertions.html">Page Objects: Where do you put your assertions?</a> </h5> </li> <li> <h5> <a href="/blog/2016/04/12/specifying-failure-message-for-rspec-expectations.html">Specifying failure message for RSpec expectations</a> </h5> </li> <li> <h5> <a href="/blog/2016/04/10/using-page-objects-in-your-acceptance-tests.html">Using Page Objects in your Acceptance Tests</a> </h5> </li> <li> <h5> <a href="/blog/2016/01/27/unit-testing-active-record-eager-loading.html">Unit Testing ActiveRecord eager-loading</a> </h5> </li> <li> <h5> <a href="/blog/2016/01/26/query-objects-in-the-rails-world-a-different-approach.html">Query Objects in the Rails world - A Different Approach</a> </h5> </li> </ol> </div> <div class=sidebar-module> <h4>Tags</h4> <ol class="list-inline tags"> <li> <h5> <a href="/blog/tags/ruby.html">ruby (35)</a> </h5> </li> <li> <h5> <a href="/blog/tags/instructions.html">instructions (34)</a> </h5> </li> <li> <h5> <a href="/blog/tags/plugins-and-libraries.html">plugins and libraries (24)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rails.html">rails (24)</a> </h5> </li> <li> <h5> <a href="/blog/tags/releases.html">releases (18)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rambling-slider.html">rambling-slider (17)</a> </h5> </li> <li> <h5> <a href="/blog/tags/jquery.html">jquery (16)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rails-3-1.html">rails 3.1 (16)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rubygems.html">rubygems (15)</a> </h5> </li> <li> <h5> <a href="/blog/tags/slider.html">slider (14)</a> </h5> </li> <li> <h5> <a href="/blog/tags/nivo-slider.html">nivo slider (14)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rambling.html">rambling (12)</a> </h5> </li> <li> <h5> <a href="/blog/tags/fixes.html">fixes (11)</a> </h5> </li> <li> <h5> <a href="/blog/tags/new-site.html">new site (8)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rambling-trie.html">rambling-trie (8)</a> </h5> </li> <li> <h5> <a href="/blog/tags/performance.html">performance (7)</a> </h5> </li> <li> <h5> <a href="/blog/tags/data-structure.html">data structure (7)</a> </h5> </li> <li> <h5> <a href="/blog/tags/testing.html">testing (6)</a> </h5> </li> <li> <h5> <a href="/blog/tags/vim.html">vim (5)</a> </h5> </li> <li> <h5> <a href="/blog/tags/bugs.html">bugs (5)</a> </h5> </li> <li> <h5> <a href="/blog/tags/opinions.html">opinions (5)</a> </h5> </li> <li> <h5> <a href="/blog/tags/javascript.html">javascript (5)</a> </h5> </li> <li> <h5> <a href="/blog/tags/refactoring.html">refactoring (5)</a> </h5> </li> <li> <h5> <a href="/blog/tags/git.html">git (4)</a> </h5> </li> <li> <h5> <a href="/blog/tags/coffeescript.html">coffeescript (4)</a> </h5> </li> <li> <h5> <a href="/blog/tags/flash.html">flash (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/heroku.html">heroku (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rambling-slider-rails.html">rambling-slider-rails (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/capybara.html">capybara (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rvm.html">rvm (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/design-patterns.html">design-patterns (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/new-look.html">new look (3)</a> </h5> </li> <li> <h5> <a href="/blog/tags/rubymine.html">rubymine (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/markdown.html">markdown (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/error-handling.html">error handling (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/database-migrations.html">database migrations (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/ssh.html">ssh (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/ubuntu.html">ubuntu (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/cyanogenmod.html">cyanogenmod (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/nodejs.html">nodejs (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/haml.html">haml (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/jasmine.html">jasmine (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/android.html">android (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/selenium.html">selenium (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/nokogiri.html">nokogiri (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/refinerycms.html">refinerycms (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/internet-explorer.html">internet explorer (2)</a> </h5> </li> <li> <h5> <a href="/blog/tags/mercurial.html">mercurial (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/jetbrains.html">jetbrains (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/windows.html">windows (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/actionmailer.html">actionmailer (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/postgresql.html">postgresql (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/i18n.html">i18n (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/capybara-webkit.html">capybara-webkit (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/will-paginate.html">will_paginate (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/deployment.html">deployment (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/activerecord.html">activerecord (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/background-tasks.html">background tasks (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/cron.html">cron (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/simple-navigation.html">simple-navigation (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/html.html">html (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/erb.html">erb (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/assets.html">assets (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/bash.html">bash (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/github.html">github (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/pygments.html">pygments (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/lua.html">lua (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/homebrew.html">homebrew (1)</a> </h5> </li> <li> <h5> <a href="/blog/tags/powershell.html">powershell (1)</a> </h5> </li> </ol> </div> <div class=sidebar-module> <h4>By Year</h4> <ol class=list-unstyled> <li> <h5> <a href="/blog/2020.html">2020 (1)</a> </h5> </li> <li> <h5> <a href="/blog/2018.html">2018 (3)</a> </h5> </li> <li> <h5> <a href="/blog/2017.html">2017 (1)</a> </h5> </li> <li> <h5> <a href="/blog/2016.html">2016 (6)</a> </h5> </li> <li> <h5> <a href="/blog/2012.html">2012 (19)</a> </h5> </li> <li> <h5> <a href="/blog/2011.html">2011 (42)</a> </h5> </li> </ol> </div> </aside> </div> </div> <footer class=footer> <div class=container> <div class=row> <p class="col-sm-12 text-center"> <a href="#">Back to top</a> </p> </div> </div> <nav class="navbar navbar-default footer-navbar"> <ul class="nav navbar-nav"> <li> <a href="https://github.com/gonzedge" class=social-link> <i class="fa fa-github"></i> </a> </li> </ul> </nav> </div> </footer> </body> </html>